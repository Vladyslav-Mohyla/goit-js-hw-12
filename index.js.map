{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '54239914-b8bb815315f9ce22f6479101b';\n\n// query (–ø–æ—à—É–∫–æ–≤–µ —Å–ª–æ–≤–æ, —è–∫–µ —î —Ä—è–¥–∫–æ–º) –∑–¥—ñ–π—Å–Ω—é–≤–∞—Ç–∏ HTTP-–∑–∞–ø–∏—Ç —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ data –∑ –æ—Ç—Ä–∏–º–∞–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.\nexport const getImagesByQuery = async (query, page) => {\n  try {\n    const { data } = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    console.log('üöÄ ~ getImagesByQuery ~ data:', data);\n    return data;\n  } catch (error) {\n    iziToast.error({\n      message: `${error}`,\n      position: 'topRight',\n    });\n    throw error;\n  }\n};\n","// –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–≤–∏–Ω–Ω–∞ –ø—Ä–∏–π–º–∞—Ç–∏ –º–∞—Å–∏–≤ images, —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ HTML-—Ä–æ–∑–º—ñ—Ç–∫—É –¥–ª—è –≥–∞–ª–µ—Ä–µ—ó, –¥–æ–¥–∞–≤–∞—Ç–∏ —ó—ó –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–∞–ª–µ—Ä–µ—ó —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ SimpleLightbox refresh(). –ù—ñ—á–æ–≥–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î.\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.loader-btn');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n\nexport function createGallery(images) {\n  if (!galleryList) return;\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li>\n  <a href='${largeImageURL}'>\n  <img src=\"${webformatURL}\" alt=\"${tags}\" width = 360px height = 200px/>\n  </a>\n  <div class=\"text-img-engagement\">\n    <p>Likes <span>${likes}</span></p>\n    <p>View <span>${views}</span></p>\n    <p>Comments <span>${comments}</span></p>\n    <p>Downloads <span>${downloads}</span></p>\n  </div>\n</li>`\n    )\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', markup);\n  if (lightbox) lightbox.refresh();\n}\n\n//  –ø–æ–≤–∏–Ω–Ω–∞ –æ—á–∏—â–∞—Ç–∏ –≤–º—ñ—Å—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≥–∞–ª–µ—Ä–µ—ó\nexport function clearGallery() {\n  galleryList.innerHTML = '';\n}\n\n// –ü–æ–≤–∏–Ω–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –∫–ª–∞—Å –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ª–æ–∞–¥–µ—Ä–∞\n\nexport function showLoader() {\n  if (!loader) return;\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  if (!loader) return;\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMore() {\n  if (!loadMoreBtn) return;\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMore() {\n  if (!loadMoreBtn) return;\n  loadMoreBtn.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api'; // –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ Pixabay\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  showLoader,\n  showLoadMore,\n  hideLoadMore,\n  loadMoreBtn,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst firstCard = document.querySelector('.gallery li');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\nlet isLoading = false;\n\nform.addEventListener('submit', onFormSubmit);\nif (loadMoreBtn) loadMoreBtn.addEventListener('click', onLoadBtn);\n\nasync function onLoadBtn() {\n  if (isLoading) return;\n  if (!query) return;\n\n  page += 1;\n  hideLoadMore();\n  showLoader();\n  isLoading = true;\n  if (loadMoreBtn) loadMoreBtn.disabled = true;\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.info({ message: 'No more images', position: 'topRight' });\n      hideLoadMore();\n      return;\n    }\n\n    createGallery(data.hits);\n\n    // –ø–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ –Ω–∞ –¥–≤—ñ –≤–∏—Å–æ—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤\n    const firstCard = document.querySelector('.gallery li');\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n\n    const loaded = page * perPage;\n    if (loaded < totalHits) {\n      showLoadMore();\n    } else {\n      hideLoadMore();\n      iziToast.info({\n        message: \"You've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({ message: 'Error fetching images', position: 'topRight' });\n  } finally {\n    hideLoader();\n    isLoading = false;\n    if (loadMoreBtn) loadMoreBtn.disabled = false;\n  }\n}\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  const searchValue = event.target.elements['search-text'].value.trim();\n\n  if (!searchValue) {\n    alert('–í–≤–µ–¥—ñ—Ç—å –ø–æ—à—É–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è');\n    return;\n  }\n\n  query = searchValue;\n  page = 1;\n  totalHits = 0;\n\n  hideLoadMore();\n\n  clearGallery();\n  showLoader();\n  isLoading = true;\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      return;\n    }\n\n    createGallery(data.hits);\n\n    // –ø–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ –Ω–∞ –¥–≤—ñ –≤–∏—Å–æ—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤\n\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n\n    const loaded = page * perPage;\n    if (loaded < totalHits) {\n      showLoadMore();\n    } else {\n      hideLoadMore();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({ message: 'Error fetching images', position: 'topRight' });\n  } finally {\n    hideLoader();\n    isLoading = false;\n  }\n}\n"],"names":["API_KEY","getImagesByQuery","query","page","data","axios","error","iziToast","galleryList","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMore","hideLoadMore","form","firstCard","perPage","totalHits","isLoading","onFormSubmit","onLoadBtn","cardHeight","event","searchValue"],"mappings":"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"}